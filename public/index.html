<!doctype html>
<html lang="nl">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Ongeval Simulatie â€” A-Frame</title>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <style>
        body {
            margin: 0;
            font-family: system-ui, Arial;
            background: #0b1220;
        }

        /* Forceer a-scene fullscreen zodat je de simulatie ziet */
        a-scene {
            width: 100vw;
            height: 100vh;
            display: block;
        }

        /* UI panel: strakke gaming look */
        #panel {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            top: 12px;
            background: linear-gradient(180deg, rgba(20, 20, 30, 0.98), rgba(12, 12, 20, 0.95));
            color: #e6eef8;
            padding: 20px 22px;
            border-radius: 14px;
            box-shadow: 0 10px 60px rgba(0, 0, 0, 0.65);
            z-index: 200;
            max-width: 980px;
            width: calc(100vw - 40px);
            display: none;
            text-align: left;
            border: 1px solid rgba(255, 255, 255, 0.06);
            font-size: 18px;
        }

        #message {
            margin: 14px 0;
            white-space: pre-wrap;
            line-height: 1.4;
            font-size: 18px;
        }

        .btn {
            padding: 14px 20px;
            border-radius: 12px;
            border: 0;
            font-weight: 800;
            cursor: pointer;
            box-shadow: 0 8px 28px rgba(0, 0, 0, 0.35);
            font-size: 18px;
            min-width: 160px;
            display: inline-block;
            margin: 6px;
        }

        .btn-ok {
            background: linear-gradient(180deg, #2f80ed, #1b6fd4);
            color: white;
        }

        .btn-bad {
            background: linear-gradient(180deg, #bdc3c7, #95a5a6);
            color: white;
        }

        .btn-neutral {
            background: linear-gradient(180deg, #3a3f4a, #2a2d33);
            color: #fff;
            border: 1px solid rgba(255, 255, 255, 0.03);
        }

        @media (max-width:600px) {
            #panel {
                top: 8px;
                padding: 14px;
                font-size: 16px;
            }

            .btn {
                font-size: 16px;
                padding: 12px 16px;
                min-width: 120px;
            }
        }

        #phone {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 280px;
            height: 480px;
            background: #222;
            border-radius: 30px;
            border: 4px solid #000;
            box-shadow: 0 0 25px rgba(0, 0, 0, 0.6);
            display: none;
            flex-direction: column;
            justify-content: space-between;
            padding: 20px 10px;
            color: white;
            z-index: 70;
        }

        #phoneScreen {
            flex: 1;
            background: #111;
            border-radius: 20px;
            padding: 15px;
            overflow-y: auto;
            font-size: 14px;
        }

        #phoneChoices {
            margin-top: 10px;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .phone-btn {
            padding: 10px;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            cursor: pointer;
        }

        .phone-good {
            background: #27ae60;
            color: white;
        }

        .phone-bad {
            background: #c0392b;
            color: white;
        }

        /* kleine instructietekst in scene */
        .label {
            font-family: Arial;
            font-size: 18px;
            color: #ffffff;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.7);
        }
    </style>
</head>

<body>
    <div id="panel">
        <div id="message"></div>
        <div id="ui"></div>
    </div>
    <button id="reset" class="btn">Reset</button>
    <button id="readQuestion">Lees vraag</button>

    <div id="phone">
        <div id="phoneScreen">112 centrale: Wat is uw noodmelding?</div>
        <div id="phoneChoices"></div>
    </div>

    <a-scene collision-check background="color: #aed9ff">
        <!-- Camera: spawn recht tegenover slachtoffer (spawn z=6) -->
        <a-entity id="cameraRig" position="0 0 6">
            <a-entity camera look-controls wasd-controls position="0 1.6 0">
                <a-entity cursor="fuse: true; fuseTimeout: 900" position="0 0 -1"
                    geometry="primitive: ring; radiusInner: 0.01; radiusOuter: 0.02"
                    material="color: black; shader: flat">
                </a-entity>
            </a-entity>
        </a-entity>

        <!-- Stad: straat, stoep en curb -->
        <!-- Road: textured-like asphalt + sidewalks + curbs + lane markings (no external assets required) -->
        <a-plane rotation="-90 0 0" width="14" height="40" color="#262626" position="0 0.01 0"></a-plane>
        <!-- asphalt base -->

        <!-- sidewalks with slight elevation -->
        <a-box position="-4.6 0.05 0" width="3.2" depth="40" height="0.1" color="#e6e9ec"></a-box>
        <a-box position="4.6 0.05 0" width="3.2" depth="40" height="0.1" color="#e6e9ec"></a-box>

        <!-- curbs (thin raised edges) -->
        <a-box position="-3.05 0.12 -10" width="0.2" depth="40" height="0.14" color="#bfc9cf"></a-box>
        <a-box position="3.05 0.12 -10" width="0.2" depth="40" height="0.14" color="#bfc9cf"></a-box>

        <!-- center dashed line (generated with repeated small white planes) -->
        <a-entity id="dashed-line">
            <!-- create a set of short white segments -->
            <!-- using a loop client-side would be cleaner, but static segments are fine -->
            <a-box position="0 0.031  -18" width="0.12" depth="2.2" height="0.02" color="#ffffff"
                material="opacity:0.85"></a-box>
            <a-box position="0 0.031  -14" width="0.12" depth="2.2" height="0.02" color="#ffffff"
                material="opacity:0.85"></a-box>
            <a-box position="0 0.031  -10" width="0.12" depth="2.2" height="0.02" color="#ffffff"
                material="opacity:0.85"></a-box>
            <a-box position="0 0.031  -6" width="0.12" depth="2.2" height="0.02" color="#ffffff"
                material="opacity:0.85"></a-box>
            <a-box position="0 0.031  -2" width="0.12" depth="2.2" height="0.02" color="#ffffff"
                material="opacity:0.85"></a-box>
            <a-box position="0 0.031   2" width="0.12" depth="2.2" height="0.02" color="#ffffff"
                material="opacity:0.85"></a-box>
            <a-box position="0 0.031   6" width="0.12" depth="2.2" height="0.02" color="#ffffff"
                material="opacity:0.85"></a-box>
            <a-box position="0 0.031  10" width="0.12" depth="2.2" height="0.02" color="#ffffff"
                material="opacity:0.85"></a-box>
            <a-box position="0 0.031  14" width="0.12" depth="2.2" height="0.02" color="#ffffff"
                material="opacity:0.85"></a-box>
        </a-entity>

        <!-- small grassy verges -->
        <a-plane rotation="-90 0 0" width="40" height="10" color="#7fcf6f" position="0 0 -28"></a-plane>

        <!-- Lantaarnpalen op stoep (nu met lampkop en licht) -->
        <a-entity id="lamps">
            <!-- left lamps (op stoep, x = -4.6) -->
            <a-entity position="-4.6 0 -8">
                <a-cylinder radius="0.05" height="2.2" color="#3b3b3b" position="0 1.1 0"></a-cylinder>
                <a-sphere position="0 2.12 0" radius="0.16" color="#fff7d1"
                    material="emissive: #fff7d1; emissiveIntensity: 1"></a-sphere>
                <a-light type="point" color="#fff7d1" intensity="1.4" distance="8" position="0 2.12 0"></a-light>
            </a-entity>
            <a-entity position="-4.6 0 -2">
                <a-cylinder radius="0.05" height="2.2" color="#3b3b3b" position="0 1.1 0"></a-cylinder>
                <a-sphere position="0 2.12 0" radius="0.16" color="#fff7d1"
                    material="emissive: #fff7d1; emissiveIntensity: 1"></a-sphere>
                <a-light type="point" color="#fff7d1" intensity="1.4" distance="8" position="0 2.12 0"></a-light>
            </a-entity>

            <!-- right lamps (op stoep, x = 4.6) -->
            <a-entity position="4.6 0 8">
                <a-cylinder radius="0.05" height="2.2" color="#3b3b3b" position="0 1.1 0"></a-cylinder>
                <a-sphere position="0 2.12 0" radius="0.16" color="#fff7d1"
                    material="emissive: #fff7d1; emissiveIntensity: 1"></a-sphere>
                <a-light type="point" color="#fff7d1" intensity="1.4" distance="8" position="0 2.12 0"></a-light>
            </a-entity>
            <a-entity position="4.6 0 2">
                <a-cylinder radius="0.05" height="2.2" color="#3b3b3b" position="0 1.1 0"></a-cylinder>
                <a-sphere position="0 2.12 0" radius="0.16" color="#fff7d1"
                    material="emissive: #fff7d1; emissiveIntensity: 1"></a-sphere>
                <a-light type="point" color="#fff7d1" intensity="1.4" distance="8" position="0 2.12 0"></a-light>
            </a-entity>
        </a-entity>

        <!-- Platte gebouwen rondom (langs de weg, niet op de rijbaan) -->
        <!-- left side buildings -->
        <a-box position="-9 1.3 10" width="6" height="2.6" depth="6" color="#2f4b60"></a-box>
        <a-box position="-9 1.2 14" width="4" height="2.4" depth="5" color="#3b7a9e"></a-box>
        <a-box position="-9 1.2 18" width="5" height="2.4" depth="6" color="#6c7a89"></a-box>

        <!-- right side buildings -->
        <a-box position="9 1.3 12" width="6" height="2.6" depth="5" color="#4a6a7a"></a-box>
        <a-box position="9 1.1 8" width="5" height="2.2" depth="4" color="#2b3b45"></a-box>

        <!-- Auto (oorzaak van het ongeval) -->
        <!-- Auto start nu aan de andere kant van de weg (z = -25) -->
        <a-entity id="car" position="0 0 -25" rotation="0 0 0">
            <a-box depth="2" height="0.6" width="1.2" color="#c0392b" position="0 0.6 0"></a-box>
            <a-box depth="1.2" height="0.4" width="1" color="#e74c3c" position="0 1.0 0"></a-box>
            <a-cylinder radius="0.3" height="0.2" color="#2c3e50" rotation="90 0 0" position="0.6 0.3 0.9"></a-cylinder>
            <a-cylinder radius="0.3" height="0.2" color="#2c3e50" rotation="90 0 0"
                position="-0.6 0.3 0.9"></a-cylinder>
            <a-cylinder radius="0.3" height="0.2" color="#2c3e50" rotation="90 0 0"
                position="0.6 0.3 -0.9"></a-cylinder>
            <a-cylinder radius="0.3" height="0.2" color="#2c3e50" rotation="90 0 0"
                position="-0.6 0.3 -0.9"></a-cylinder>
        </a-entity>

        <!-- Persoon (realistischer opgebouwd uit meerdere primitives) -->
        <a-entity id="person" position="0 0 0">
            <!-- torso (houd id body voor scripts) -->
            <a-cylinder id="body" radius="0.28" height="0.9" color="#e0a66f" position="0 0.55 0"></a-cylinder>
            <!-- head -->
            <a-sphere radius="0.22" color="#f0c090" position="0 1.15 0"></a-sphere>
            <!-- arms -->
            <a-cylinder radius="0.06" height="0.7" color="#e0a66f" position="-0.38 0.8 0"
                rotation="0 0 45"></a-cylinder>
            <a-cylinder radius="0.06" height="0.7" color="#e0a66f" position="0.38 0.8 0"
                rotation="0 0 -45"></a-cylinder>
            <!-- legs -->
            <a-cylinder radius="0.07" height="0.8" color="#34495e" position="-0.12 0.1 0" rotation="0 0 0"></a-cylinder>
            <a-cylinder radius="0.07" height="0.8" color="#34495e" position="0.12 0.1 0" rotation="0 0 0"></a-cylinder>
            <!-- clothing / jacket layer -->
            <a-box width="0.6" height="0.05" depth="0.4" color="#2c3e50" position="0 0.75 0"></a-box>
            <!-- visible wound (houd id 'wound') -->
            <a-sphere id="wound" radius="0.12" color="#c0392b" position="0 0.95 0.22"></a-sphere>
        </a-entity>

        <!-- EHBO-kist naast slachtoffer -->
        <a-box id="ehbo" width="0.45" height="0.22" depth="0.3" color="#e74c3c" position="0.8 1.3 1.2"
            visible="false"></a-box>

        <!-- Spray en Pleister (komen op de EHBO-doos te liggen) -->
        <a-cylinder id="spray" radius="0.12" height="0.4" color="#3498db" position="0.4 1.3 1.4" class="interactable"
            visible="false"></a-cylinder>
        <a-text id="sprayLabel" value="Spray" align="center" color="#fff" position="0.4 1.65 1.4" scale="0.6 0.6 0.6"
            visible="false"></a-text>

        <a-box id="plaster" width="0.28" height="0.08" depth="0.14" color="#f7dc6f" position="1.2 1.3 1.4"
            class="interactable" visible="false"></a-box>
        <a-text id="plasterLabel" value="Pleister" align="center" color="#111" position="1.2 1.65 1.4"
            scale="0.6 0.6 0.6" visible="false"></a-text>

        <!-- Ambulance (komt vanaf andere kant dan de impact) -->
        <a-entity id="ambulance" position="0 0 25" rotation="0 180 0" visible="false">
            <a-box depth="2.5" height="1.2" width="1.6" color="#f1c40f" position="0 0.6 0"></a-box>
            <a-box width="1.6" height="0.2" depth="0.15" color="#d35400" position="0 0.25 1.1"></a-box>
            <a-cylinder radius="0.3" height="0.2" color="#2c3e50" rotation="90 0 0" position="0.7 0.3 1"></a-cylinder>
            <a-cylinder radius="0.3" height="0.2" color="#2c3e50" rotation="90 0 0" position="-0.7 0.3 1"></a-cylinder>
            <a-cylinder radius="0.3" height="0.2" color="#2c3e50" rotation="90 0 0" position="0.7 0.3 -1"></a-cylinder>
            <a-cylinder radius="0.3" height="0.2" color="#2c3e50" rotation="90 0 0" position="-0.7 0.3 -1"></a-cylinder>
            <a-sphere id="siren" radius="0.15" color="red" position="0 1.3 0">
                <a-animation attribute="color" values="red;blue;red" dur="500" repeat="indefinite"></a-animation>
            </a-sphere>
        </a-entity>

        <!-- Twee medics (verborgen, verschijnen bij ambulance) -->
        <a-entity id="medic1" position="0.6 0 25" visible="false">
            <a-sphere radius="0.18" color="#2ecc71" position="0 1 0"></a-sphere>
            <a-box width="0.25" height="0.5" depth="0.2" color="#145a32" position="0 0.35 0"></a-box>
        </a-entity>
        <a-entity id="medic2" position="-0.6 0 25" visible="false">
            <a-sphere radius="0.18" color="#2ecc71" position="0 1 0"></a-sphere>
            <a-box width="0.25" height="0.5" depth="0.2" color="#145a32" position="0 0.35 0"></a-box>
        </a-entity>

        <!-- Waarschuwingsdriehoek -->
        <a-entity id="triangle" visible="false">
            <a-cone radius-bottom="0.8" radius-top="0" height="1" color="#f1c40f" position="0 0.5 0"></a-cone>
            <a-cone radius-bottom="0.6" radius-top="0" height="0.9" color="#ffffff" position="0 0.51 0"></a-cone>
        </a-entity>

        <!-- gaze targets (balletjes) - iets verder voor de spawn zodat gebruiker ze direct ziet -->
        <a-sphere id="lookLeft" color="#ffd166" radius="0.22" position="-1.2 1.6 6.6" class="gazeTarget"
            visible="false"></a-sphere>
        <a-sphere id="lookRight" color="#ffd166" radius="0.22" position="1.2 1.6 6.6" class="gazeTarget"
            visible="false"></a-sphere>
        <a-text id="lookHint" value="Kijk eerst links en rechts naar de balletjes om je omgeving te checken"
            align="center" color="#fff" position="0 2 6.6" scale="0.95 0.95 0.95" visible="false"></a-text>

        <!-- Licht -->
        <a-entity light="type: ambient; intensity: 0.8"></a-entity>
        <a-entity light="type: directional; intensity: 0.6" position="0 10 5"></a-entity>
    </a-scene>

    <!-- Load the modular game code -->
    <script type="module" src="/main.js"></script>
</body>
</html>
